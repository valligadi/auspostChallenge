The solution for the challenge is to write a batch apex to collect all closed cases with empty secret key and pass them to API in execute method in the chunks of 100, as there can only be 100 api calls in single execution abd the API is not bulkified to accept a list of cases. I have scheduled this batch in its finally method after 30mins of the first execution. Alternatively we can use a schedule class also and manually schedule it.
Also, since the case can be modified after it is closed by another user and by the time its picked by the batch, the lastmodifiedby can be that user other than the one who closed it, So I have created a field on case called userWhoClosed__c and populating it in casetrigger.
